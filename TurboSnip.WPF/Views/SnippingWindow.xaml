<Window x:Class="TurboSnip.WPF.Views.SnippingWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        WindowStyle="None" 
        AllowsTransparency="True" 
        Topmost="True" 
        ResizeMode="NoResize"
        ShowInTaskbar="False"
        Background="Black"
        Cursor="Cross">
    
    <Grid>
        <!-- 1. The Screen Capture (Full Opacity) -->
        <Image Name="BackgroundImage" Stretch="Fill"/>
        
        <!-- 2. Dim Overlay (Semi-transparent Black) -->
        <!-- IsHitTestVisible=False to let clicks pass to Canvas if we wanted, 
             but we want Canvas to handle inputs.
             Actually, we want to capture mouse on the Canvas which sits on top. -->
        <Rectangle Name="DimOverlay" Fill="#55000000" IsHitTestVisible="False"/>

        <!-- 3. Interaction Layer -->
        <!-- Background must be Transparent (not null) to intercept mouse events -->
        <Canvas Name="MainCanvas" Background="Transparent" ClipToBounds="True">
            <!-- Selection Rectangle -->
            <Rectangle Name="SelectionRect" 
                       Stroke="#0097FB" 
                       StrokeThickness="2" 
                       Fill="#22FFFFFF"
                       Visibility="Collapsed"/>

            <!-- Floating Toolbar (Initially Hidden) -->
            <StackPanel Name="ToolbarPanel" 
                        Orientation="Horizontal" 
                        Background="#2D2D30" 
                        Visibility="Collapsed"
                        Height="40">
                <StackPanel.Resources>
                    <Style TargetType="Button">
                        <Setter Property="Width" Value="40"/>
                        <Setter Property="Height" Value="40"/>
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="Foreground" Value="White"/> <!-- Default, overridden by instances -->
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="FontFamily" Value="Segoe MDL2 Assets"/>
                        <Setter Property="FontSize" Value="24"/> <!-- Default Base Size -->
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" CornerRadius="5">
                                        <TextBlock Text="{TemplateBinding Content}" 
                                                   HorizontalAlignment="Center" 
                                                   VerticalAlignment="Center"
                                                   Foreground="{TemplateBinding Foreground}"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#444444"/>
                                        </Trigger>
                                        <Trigger Property="IsPressed" Value="True">
                                            <Setter Property="Background" Value="#333333"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </StackPanel.Resources>
                
                <!-- 1. Copy Text (OCR) - Blue Scanner -->
                <Button Content="&#xE8D2;" Foreground="#409CFF" ToolTip="Copy Text (OCR)" Click="OcrBtn_Click"/>
                
                <!-- 2. Translate - Purple 'World' -->
                <Button Content="&#xE8C1;" Foreground="#AF52DE" ToolTip="Translate" Click="TranslateBtn_Click"/>
                
                <!-- 3. Cancel (Quit) - Red X -->
                <Button Content="&#xE711;" Foreground="#FF5F57" ToolTip="Cancel" Click="CancelBtn_Click"/>
                
                <!-- 4. Copy Image (Checkmark) - Green Check (Larger) -->
                <Button Content="&#xE73E;" Foreground="#32D74B" FontSize="28" ToolTip="Copy Image" Click="CopyBtn_Click"/>
            </StackPanel>
        </Canvas>


    </Grid>
</Window>
